{"ast":null,"code":"var _jsxFileName = \"/Users/apple/Desktop/reactchat/src/pages/ChatLobby.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\nimport { onAuthStateChanged } from 'firebase/auth';\nimport { auth } from './config/firebase';\nimport { AuthProvider } from './context/AuthProvider';\nimport Login from './pages/Login';\nimport ChatLobby from './pages/ChatLobby';\nimport ChatRoom from './pages/ChatRoom';\nimport JoinA from './pages/JoinA';\nimport JoinB from './pages/JoinB';\nconst App = () => {\n  const [isLogged, setIsLogged] = useState(false);\n  const [email, setEmail] = useState(\"\");\n  const [nick, setNick] = useState(\"\");\n  const [userIcon, setUserIcon] = useState(\"\");\n  const waitForAuthChange = () => {\n    return new Promise(resolve => {\n      //promise 의 결과값을 일부러 만듬\n      const unsub = onAuthStateChanged(auth, user => {\n        if (user) {\n          setIsLogged(true);\n          setEmail(user.email);\n          setNick(user.displayName);\n          setUserIcon(user.photoURL);\n          resolve(); //사용자 인증 성공이면 Promise에 값을 담고 해결\n        }\n      });\n      return () => unsub(); //컴포넌트가 언마운트 될때 구독을 해제\n    });\n  };\n\n  //인증상태 해결\n  const handleAuthChange = async () => {\n    try {\n      await waitForAuthChange();\n      console.log(\"사용자 인증이 되어 있음묘\");\n    } catch (error) {\n      console.error(\"오류가 발생했씀묘\", error);\n    }\n  };\n  useEffect(() => {\n    handleAuthChange();\n  }, []);\n  return /*#__PURE__*/React.createElement(Router, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(AuthProvider, {\n    value: {\n      email,\n      nick,\n      userIcon\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Routes, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 11\n    }\n  }, isLogged ? /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    element: /*#__PURE__*/React.createElement(ChatLobby, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 48\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }\n  }) : /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    element: /*#__PURE__*/React.createElement(Login, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 48\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/chat/:id\",\n    element: /*#__PURE__*/React.createElement(ChatRoom, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 46\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/login\",\n    element: /*#__PURE__*/React.createElement(Login, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 49\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/joina\",\n    element: /*#__PURE__*/React.createElement(JoinA, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 43\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/joinb\",\n    element: /*#__PURE__*/React.createElement(JoinB, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 43\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }))));\n};\nexport default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","onAuthStateChanged","auth","AuthProvider","Login","ChatLobby","ChatRoom","JoinA","JoinB","App","isLogged","setIsLogged","email","setEmail","nick","setNick","userIcon","setUserIcon","waitForAuthChange","Promise","resolve","unsub","user","displayName","photoURL","handleAuthChange","console","log","error","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","value","exact","path","element"],"sources":["/Users/apple/Desktop/reactchat/src/pages/ChatLobby.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom'\r\nimport { onAuthStateChanged } from 'firebase/auth'\r\nimport { auth } from './config/firebase'\r\nimport { AuthProvider } from './context/AuthProvider'\r\nimport Login from './pages/Login'\r\nimport ChatLobby from './pages/ChatLobby'\r\nimport ChatRoom from './pages/ChatRoom'\r\nimport JoinA from './pages/JoinA'\r\nimport JoinB from './pages/JoinB'\r\n\r\nconst App = () => {\r\n  const [isLogged, setIsLogged] = useState(false);\r\n  const [email, setEmail] = useState(\"\");\r\n  const [nick, setNick] = useState(\"\");\r\n  const [userIcon, setUserIcon] = useState(\"\");\r\n\r\n  const waitForAuthChange = () => {\r\n     return new Promise(resolve => {  //promise 의 결과값을 일부러 만듬\r\n        const unsub = onAuthStateChanged(auth, (user)=>{\r\n           if(user){\r\n              setIsLogged(true);\r\n              setEmail(user.email);\r\n              setNick(user.displayName);\r\n              setUserIcon(user.photoURL);\r\n              resolve(); //사용자 인증 성공이면 Promise에 값을 담고 해결\r\n           }\r\n        });\r\n        return ()=>unsub(); //컴포넌트가 언마운트 될때 구독을 해제\r\n     });\r\n  }\r\n\r\n  //인증상태 해결\r\n  const handleAuthChange = async() => {\r\n     try{\r\n        await waitForAuthChange();\r\n        console.log(\"사용자 인증이 되어 있음묘\");\r\n     }catch(error){\r\n        console.error(\"오류가 발생했씀묘\", error);\r\n     }\r\n  }\r\n\r\n  useEffect(()=>{\r\n    handleAuthChange();\r\n  },[]);\r\n\r\n  return (\r\n    <Router>\r\n      <AuthProvider value={{email, nick, userIcon}}>\r\n          <Routes>\r\n            {\r\n              isLogged ? (\r\n                <Route exact path=\"/\" element={<ChatLobby />}/>\r\n              ) : (\r\n                <Route exact path=\"/\" element={<Login />}/>\r\n              )\r\n            }\r\n            <Route path=\"/chat/:id\" element={<ChatRoom />} />\r\n            <Route exact path=\"/login\" element={<Login />}/>\r\n            <Route path=\"/joina\" element={<JoinA />} />\r\n            <Route path=\"/joinb\" element={<JoinB />} />\r\n          </Routes> \r\n       </AuthProvider>\r\n    </Router>  \r\n  )\r\n}\r\n\r\nexport default App"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}